import{k as S,j as e,l as L,m as Pe,n as Z,o as ee,r as u,p as Re,q as se,s as Me,P as F,R as Le,v as Fe,w as _,x as Ae,y as De,A as Ie,C as Ve,u as te,a as Ue,D as ae,c as q,B as w,L as H,E as $e,I,b as Ge,t as _e,G as z,i as V,F as qe,d as D,e as P,f as R,g as M,h as $,H as G,J as Ye,K as Oe,M as Be}from"./index-hzS7AP9k.js";import{T as ne,a as ie,b as T,c as y,d as re,e as g}from"./table-bFW6g0Nz.js";import{D as He,a as Ke,b as We,c as ze,d as Qe,e as Xe,f as Je,T as Ze}from"./dialog-CP6dT8sS.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=S("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=S("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=S("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=S("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=S("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=S("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=S("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),is=Pe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le({className:t,variant:a,...i}){return e.jsx("div",{className:L(is({variant:a}),t),...i})}var Q="Tabs",[rs,js]=Z(Q,[ee]),de=ee(),[cs,X]=rs(Q),ue=u.forwardRef((t,a)=>{const{__scopeTabs:i,value:o,onValueChange:r,defaultValue:f,orientation:c="horizontal",dir:l,activationMode:b="automatic",...x}=t,m=Re(l),[d,j]=se({prop:o,onChange:r,defaultProp:f});return e.jsx(cs,{scope:i,baseId:Me(),value:d,onValueChange:j,orientation:c,dir:m,activationMode:b,children:e.jsx(F.div,{dir:m,"data-orientation":c,...x,ref:a})})});ue.displayName=Q;var me="TabsList",he=u.forwardRef((t,a)=>{const{__scopeTabs:i,loop:o=!0,...r}=t,f=X(me,i),c=de(i);return e.jsx(Le,{asChild:!0,...c,orientation:f.orientation,dir:f.dir,loop:o,children:e.jsx(F.div,{role:"tablist","aria-orientation":f.orientation,...r,ref:a})})});he.displayName=me;var xe="TabsTrigger",fe=u.forwardRef((t,a)=>{const{__scopeTabs:i,value:o,disabled:r=!1,...f}=t,c=X(xe,i),l=de(i),b=pe(c.baseId,o),x=je(c.baseId,o),m=o===c.value;return e.jsx(Fe,{asChild:!0,...l,focusable:!r,active:m,children:e.jsx(F.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":x,"data-state":m?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:b,...f,ref:a,onMouseDown:_(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?c.onValueChange(o):d.preventDefault()}),onKeyDown:_(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&c.onValueChange(o)}),onFocus:_(t.onFocus,()=>{const d=c.activationMode!=="manual";!m&&!r&&d&&c.onValueChange(o)})})})});fe.displayName=xe;var ge="TabsContent",be=u.forwardRef((t,a)=>{const{__scopeTabs:i,value:o,forceMount:r,children:f,...c}=t,l=X(ge,i),b=pe(l.baseId,o),x=je(l.baseId,o),m=o===l.value,d=u.useRef(m);return u.useEffect(()=>{const j=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(j)},[]),e.jsx(Ae,{present:r||m,children:({present:j})=>e.jsx(F.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":b,hidden:!j,id:x,tabIndex:0,...c,ref:a,style:{...t.style,animationDuration:d.current?"0s":void 0},children:j&&f})})});be.displayName=ge;function pe(t,a){return`${t}-trigger-${a}`}function je(t,a){return`${t}-content-${a}`}var os=ue,ve=he,ye=fe,Ne=be;const ls=os,we=u.forwardRef(({className:t,...a},i)=>e.jsx(ve,{ref:i,className:L("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a}));we.displayName=ve.displayName;const Y=u.forwardRef(({className:t,...a},i)=>e.jsx(ye,{ref:i,className:L("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a}));Y.displayName=ye.displayName;const O=u.forwardRef(({className:t,...a},i)=>e.jsx(Ne,{ref:i,className:L("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a}));O.displayName=Ne.displayName;var J="Switch",[ds,vs]=Z(J),[us,ms]=ds(J),ke=u.forwardRef((t,a)=>{const{__scopeSwitch:i,name:o,checked:r,defaultChecked:f,required:c,disabled:l,value:b="on",onCheckedChange:x,form:m,...d}=t,[j,n]=u.useState(null),p=De(a,E=>n(E)),N=u.useRef(!1),k=j?m||!!j.closest("form"):!0,[C=!1,v]=se({prop:r,defaultProp:f,onChange:x});return e.jsxs(us,{scope:i,checked:C,disabled:l,children:[e.jsx(F.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":Se(C),"data-disabled":l?"":void 0,disabled:l,value:b,...d,ref:p,onClick:_(t.onClick,E=>{v(K=>!K),k&&(N.current=E.isPropagationStopped(),N.current||E.stopPropagation())})}),k&&e.jsx(hs,{control:j,bubbles:!N.current,name:o,value:b,checked:C,required:c,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});ke.displayName=J;var Ce="SwitchThumb",Te=u.forwardRef((t,a)=>{const{__scopeSwitch:i,...o}=t,r=ms(Ce,i);return e.jsx(F.span,{"data-state":Se(r.checked),"data-disabled":r.disabled?"":void 0,...o,ref:a})});Te.displayName=Ce;var hs=t=>{const{control:a,checked:i,bubbles:o=!0,...r}=t,f=u.useRef(null),c=Ie(i),l=Ve(a);return u.useEffect(()=>{const b=f.current,x=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(x,"checked").set;if(c!==i&&d){const j=new Event("click",{bubbles:o});d.call(b,i),b.dispatchEvent(j)}},[c,i,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...r,tabIndex:-1,ref:f,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Se(t){return t?"checked":"unchecked"}var Ee=ke,xs=Te;const B=u.forwardRef(({className:t,...a},i)=>e.jsx(Ee,{className:L("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:i,children:e.jsx(xs,{className:L("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));B.displayName=Ee.displayName;const fs=()=>{const{toast:t}=te(),a=u.useRef(null),i=u.useRef(null),[o,r]=u.useState(!1),[f,c]=u.useState(null),[l,b]=u.useState(!1),x=Ge({resolver:_e(Be),defaultValues:{title:"",artist:"",isActive:!1,isYoutubeLink:!1,youtubeUrl:""}}),{data:m,isLoading:d,isError:j,error:n,refetch:p}=ae({queryKey:["/api/admin/music"],queryFn:async()=>{const s=await V("GET","/api/admin/music");if(!s.ok)throw new Error("Failed to fetch music tracks");return await s.json()}}),{mutate:N,isPending:k}=q({mutationFn:async s=>{const h=await fetch("/api/admin/music",{method:"POST",body:s,credentials:"include"});if(!h.ok){const U=await h.text();throw new Error(U||"Failed to upload music track")}return await h.json()},onSuccess:()=>{t({title:"Success",description:"Music track uploaded successfully",variant:"success"}),x.reset(),b(!1),p(),z.invalidateQueries({queryKey:["/api/music/active"]})},onError:s=>{t({title:"Error",description:s.message||"Failed to upload music track",variant:"destructive"})}}),{mutate:C}=q({mutationFn:async s=>{const h=await V("PUT",`/api/admin/music/${s}/active`);if(!h.ok)throw new Error("Failed to set active track");return h.json()},onSuccess:()=>{t({title:"Success",description:"Active music track updated",variant:"success"}),p(),z.invalidateQueries({queryKey:["/api/music/active"]})},onError:s=>{t({title:"Error",description:s.message||"Failed to set active track",variant:"destructive"})}}),{mutate:v}=q({mutationFn:async s=>{const h=await V("DELETE",`/api/admin/music/${s}`);if(!h.ok)throw new Error("Failed to delete track");return h.json()},onSuccess:()=>{t({title:"Success",description:"Music track deleted",variant:"success"}),p(),a.current&&(a.current.pause(),r(!1),c(null)),z.invalidateQueries({queryKey:["/api/music/active"]})},onError:s=>{t({title:"Error",description:s.message||"Failed to delete track",variant:"destructive"})}}),E=s=>{var U;console.log("Form submitted with data:",s);const h=new FormData;if(h.append("title",s.title),s.artist&&h.append("artist",s.artist),h.append("isActive",s.isActive?"true":"false"),h.append("isYoutubeLink",s.isYoutubeLink?"true":"false"),s.isYoutubeLink){if(!s.youtubeUrl){t({title:"Error",description:"Please enter a YouTube URL",variant:"destructive"});return}console.log("Submitting YouTube URL:",s.youtubeUrl),h.append("youtubeUrl",s.youtubeUrl),h.forEach((A,W)=>{console.log(`Form data: ${W} = ${A}`)}),N(h)}else console.log("File input element:",i.current),console.log("Files selected:",(U=i.current)==null?void 0:U.files),i.current&&i.current.files&&i.current.files.length>0?(console.log("File selected:",i.current.files[0]),h.append("musicFile",i.current.files[0]),h.forEach((A,W)=>{console.log(`Form data: ${W} = ${A instanceof File?A.name:A}`)}),N(h)):t({title:"Error",description:"Please select a music file",variant:"destructive"})},K=s=>{f===s.id?a.current&&(o?(a.current.pause(),r(!1)):(a.current.play(),r(!0))):(a.current&&a.current.pause(),a.current=new Audio(s.filePath),a.current.addEventListener("ended",()=>{r(!1)}),a.current.play().then(()=>{r(!0),c(s.id)}).catch(h=>{console.error("Error playing audio:",h),t({title:"Playback Error",description:"Could not play the audio file",variant:"destructive"}),r(!1),c(null)}))};return u.useEffect(()=>()=>{a.current&&(a.current.pause(),a.current=null)},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-[#4a5568]",children:"Wedding Music"}),e.jsx("p",{className:"text-[#718096]",children:"Manage the background music for your wedding website"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"outline",className:"border-[#e8c1c8] text-[#6b0f2b] hover:bg-[#fff5f7]",onClick:()=>p(),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(He,{open:l,onOpenChange:b,children:[e.jsx(Ke,{asChild:!0,children:e.jsxs(w,{className:"bg-[#6b0f2b] text-white hover:bg-[#890f32]",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Add Music Track"]})}),e.jsxs(We,{className:"sm:max-w-[425px]",children:[e.jsxs(ze,{children:[e.jsx(Qe,{children:"Add New Music Track"}),e.jsx(Xe,{children:"Upload a music track to use as background music on your wedding website."})]}),e.jsx(qe,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(E),className:"space-y-4",children:[e.jsx(D,{control:x.control,name:"title",render:({field:s})=>e.jsxs(P,{children:[e.jsx(R,{children:"Track Title"}),e.jsx(M,{children:e.jsx(I,{placeholder:"Wedding March",...s})}),e.jsx($,{})]})}),e.jsx(D,{control:x.control,name:"artist",render:({field:s})=>e.jsxs(P,{children:[e.jsx(R,{children:"Artist (Optional)"}),e.jsx(M,{children:e.jsx(I,{placeholder:"Artist name",...s})}),e.jsx($,{})]})}),e.jsx(D,{control:x.control,name:"isYoutubeLink",render:({field:s})=>e.jsxs(P,{className:"flex flex-row items-center justify-between rounded-lg border border-[#e8c1c8] p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(R,{children:"Use YouTube Link"}),e.jsx(G,{children:"Add music from YouTube instead of uploading a file"})]}),e.jsx(M,{children:e.jsx(B,{checked:s.value,onCheckedChange:s.onChange})})]})}),x.watch("isYoutubeLink")?e.jsx(D,{control:x.control,name:"youtubeUrl",render:({field:s})=>e.jsxs(P,{children:[e.jsx(R,{children:"YouTube URL"}),e.jsx(M,{children:e.jsx(I,{placeholder:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",...s})}),e.jsx(G,{children:"Enter a valid YouTube video URL"}),e.jsx($,{})]})}):e.jsxs(P,{children:[e.jsx(R,{children:"Music File"}),e.jsx(M,{children:e.jsx(I,{ref:i,id:"musicFile",type:"file",accept:"audio/mp3,audio/wav,audio/ogg,audio/mpeg"})}),e.jsx(G,{children:"Upload MP3, WAV, or OGG files (max 10MB)"}),e.jsx($,{})]}),e.jsx(D,{control:x.control,name:"isActive",render:({field:s})=>e.jsxs(P,{className:"flex flex-row items-center justify-between rounded-lg border border-[#e8c1c8] p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(R,{children:"Set as Active Track"}),e.jsx(G,{children:"This track will play automatically on the website"})]}),e.jsx(M,{children:e.jsx(B,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs(Je,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(w,{type:"submit",className:"bg-[#6b0f2b] text-white hover:bg-[#890f32]",disabled:k,children:k?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Upload"]})})]})]})})]})]})]})]}),e.jsx("div",{className:"rounded-md border border-[#e8c1c8]",children:e.jsxs(ne,{children:[e.jsx(ie,{children:e.jsxs(T,{className:"bg-[#fff5f7]",children:[e.jsx(y,{className:"text-[#4a5568]",children:"Title"}),e.jsx(y,{className:"text-[#4a5568]",children:"Artist"}),e.jsx(y,{className:"text-[#4a5568]",children:"Status"}),e.jsx(y,{className:"text-[#4a5568]",children:"Preview"}),e.jsx(y,{className:"text-[#4a5568]",children:"Actions"})]})}),e.jsx(re,{children:d?e.jsx(T,{children:e.jsx(g,{colSpan:5,className:"text-center py-10",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(H,{className:"h-8 w-8 text-[#6b0f2b] animate-spin mb-2"}),e.jsx("p",{className:"text-[#4a5568]",children:"Loading music tracks..."})]})})}):j?e.jsx(T,{children:e.jsx(g,{colSpan:5,className:"text-center py-10",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ce,{className:"h-8 w-8 text-red-500 mb-2"}),e.jsx("p",{className:"text-[#4a5568]",children:"Error loading music tracks"}),e.jsx("p",{className:"text-[#718096] text-sm",children:n==null?void 0:n.message})]})})}):m&&m.length>0?m.map(s=>e.jsxs(T,{className:"hover:bg-[#fff5f7]",children:[e.jsx(g,{className:"font-medium",children:s.title}),e.jsx(g,{children:s.artist||"-"}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{checked:s.isActive||!1,onCheckedChange:()=>C(s.id),disabled:s.isActive||!1}),e.jsx("span",{className:"ml-2",children:s.isActive?e.jsx(le,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Active"}):"Inactive"})]})}),e.jsx(g,{children:e.jsxs(w,{size:"sm",variant:"outline",className:"border-[#e8c1c8] text-[#6b0f2b] hover:bg-[#fff5f7]",onClick:()=>K(s),children:[f===s.id&&o?e.jsx(Ye,{className:"h-4 w-4 mr-1"}):e.jsx(Oe,{className:"h-4 w-4 mr-1"}),f===s.id&&o?"Pause":"Play"]})}),e.jsx(g,{children:e.jsxs(w,{size:"sm",variant:"outline",onClick:()=>{confirm("Are you sure you want to delete this track?")&&v(s.id)},className:"text-red-600 border-red-200 hover:bg-red-50",children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Delete"]})})]},s.id)):e.jsx(T,{children:e.jsx(g,{colSpan:5,className:"text-center py-10",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-[#4a5568]",children:"No music tracks found"}),e.jsx("p",{className:"text-[#718096] text-sm",children:"Add a track to get started"})]})})})})]})})]})},ys=()=>{const{toast:t}=te(),[,a]=Ue(),[i,o]=u.useState(""),{data:r,isLoading:f,isError:c,error:l,refetch:b}=ae({queryKey:["/api/admin/rsvps"],queryFn:async()=>{const n=await V("GET","/api/admin/rsvps");if(!n.ok)throw n.status===401?(a("/admin/login"),new Error("You are not logged in")):new Error("Failed to fetch RSVPs");return await n.json()}}),{mutate:x,isPending:m}=q({mutationFn:async()=>{await V("POST","/api/admin/logout")},onSuccess:()=>{t({title:"Logged out",description:"You have been logged out successfully",variant:"success"}),a("/admin/login")},onError:n=>{t({title:"Logout failed",description:n.message||"Failed to log out",variant:"destructive"})}}),d=r==null?void 0:r.filter(n=>{var N,k;const p=i.toLowerCase();return n.name.toLowerCase().includes(p)||((N=n.email)==null?void 0:N.toLowerCase().includes(p))||!1||n.phone.toLowerCase().includes(p)||n.guestCount.toString().includes(p)||((k=n.message)==null?void 0:k.toLowerCase().includes(p))||!1||n.status.toLowerCase().includes(p)}),j=()=>{if(!(r!=null&&r.length))return;const p=[["Name","Email","Phone","Guest Count","Attending","Dietary Needs","Message","Date"].join(","),...r.map(v=>[`"${v.name.replace(/"/g,'""')}"`,`"${(v.email||"").replace(/"/g,'""')}"`,`"${v.phone.replace(/"/g,'""')}"`,v.guestCount,v.status==="attending"?"Yes":v.status==="not-attending"?"No":"Maybe",`"${(v.dietaryRestrictions||"").replace(/"/g,'""')}"`,`"${(v.message||"").replace(/"/g,'""')}"`,new Date(v.createdAt).toLocaleDateString()].join(","))].join(`
`),N=new Blob([p],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(N),C=document.createElement("a");C.href=k,C.download=`wedding-rsvps-${new Date().toISOString().split("T")[0]}.csv`,C.click(),t({title:"Export successful",description:"RSVP data has been exported to CSV",variant:"success"})};return u.useEffect(()=>{c&&(l==null?void 0:l.message)==="You are not logged in"&&a("/admin/login")},[c,l,a]),e.jsxs("div",{className:"min-h-screen bg-[#fff5f7]",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-[#e8c1c8]",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsx("h1",{className:"font-['Great_Vibes'] text-3xl text-[#6b0f2b]",children:"Admin Dashboard"}),e.jsxs(w,{variant:"ghost",className:"text-[#6b0f2b] hover:bg-[#fff5f7]",onClick:()=>x(),disabled:m,children:[m?e.jsx(H,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ss,{className:"h-4 w-4 mr-2"}),m?"Logging out...":"Logout"]})]})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsx($e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-md border border-[#e8c1c8] p-6",children:e.jsxs(ls,{defaultValue:"rsvps",className:"w-full",children:[e.jsxs(we,{className:"mb-6 bg-[#fff5f7] border border-[#e8c1c8]",children:[e.jsx(Y,{value:"rsvps",className:"data-[state=active]:bg-[#6b0f2b] data-[state=active]:text-white",children:"RSVPs"}),e.jsx(Y,{value:"music",className:"data-[state=active]:bg-[#6b0f2b] data-[state=active]:text-white",children:"Wedding Music"}),e.jsx(Y,{value:"messages",className:"data-[state=active]:bg-[#6b0f2b] data-[state=active]:text-white",children:"Guest Messages"})]}),e.jsxs(O,{value:"rsvps",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#4a5568]",children:"Wedding RSVPs"}),e.jsxs(w,{onClick:()=>a("/admin/rsvps"),className:"flex items-center gap-2",children:[e.jsx("span",{children:"Go to RSVP Management"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"m12 5 7 7-7 7"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(I,{placeholder:"Search RSVPs...",className:"pl-8 border-[#e8c1c8] focus-visible:ring-[#6b0f2b]",value:i,onChange:n=>o(n.target.value)})]}),e.jsxs(w,{variant:"outline",className:"border-[#e8c1c8] text-[#6b0f2b] hover:bg-[#fff5f7]",onClick:()=>b(),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(w,{className:"bg-[#6b0f2b] text-white hover:bg-[#890f32]",onClick:j,disabled:!(r!=null&&r.length),children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-[#fff5f7] p-4 rounded-lg border border-[#e8c1c8]",children:[e.jsx("h3",{className:"text-sm font-medium text-[#718096] mb-2",children:"Total RSVPs"}),e.jsx("p",{className:"text-2xl font-bold text-[#6b0f2b]",children:r.length})]}),e.jsxs("div",{className:"bg-[#fff5f7] p-4 rounded-lg border border-[#e8c1c8]",children:[e.jsx("h3",{className:"text-sm font-medium text-[#718096] mb-2",children:"Attending"}),e.jsx("p",{className:"text-2xl font-bold text-[#6b0f2b]",children:r.filter(n=>n.status==="attending").length})]}),e.jsxs("div",{className:"bg-[#fff5f7] p-4 rounded-lg border border-[#e8c1c8]",children:[e.jsx("h3",{className:"text-sm font-medium text-[#718096] mb-2",children:"Total Guests"}),e.jsx("p",{className:"text-2xl font-bold text-[#6b0f2b]",children:r.filter(n=>n.status==="attending").reduce((n,p)=>n+p.guestCount,0)})]})]}),e.jsx("div",{className:"rounded-md border border-[#e8c1c8]",children:e.jsxs(ne,{children:[e.jsx(ie,{children:e.jsxs(T,{className:"bg-[#fff5f7]",children:[e.jsx(y,{className:"text-[#4a5568]",children:"Name"}),e.jsx(y,{className:"text-[#4a5568]",children:"Status"}),e.jsx(y,{className:"text-[#4a5568]",children:"Guests"}),e.jsx(y,{className:"text-[#4a5568]",children:"Phone"}),e.jsx(y,{className:"text-[#4a5568]",children:"Email"}),e.jsx(y,{className:"text-[#4a5568]",children:"Special Requests"}),e.jsx(y,{className:"text-[#4a5568]",children:"Date"})]})}),e.jsx(re,{children:f?e.jsx(T,{children:e.jsx(g,{colSpan:7,className:"text-center py-10",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(H,{className:"h-8 w-8 text-[#6b0f2b] animate-spin mb-2"}),e.jsx("p",{className:"text-[#4a5568]",children:"Loading RSVPs..."})]})})}):c?e.jsx(T,{children:e.jsx(g,{colSpan:7,className:"text-center py-10",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ce,{className:"h-8 w-8 text-red-500 mb-2"}),e.jsx("p",{className:"text-[#4a5568]",children:"Error loading RSVPs"}),e.jsx("p",{className:"text-[#718096] text-sm",children:l==null?void 0:l.message})]})})}):d!=null&&d.length?d.map(n=>e.jsxs(T,{className:"hover:bg-[#fff5f7]",children:[e.jsx(g,{className:"font-medium",children:n.name}),e.jsx(g,{children:e.jsx(le,{className:`${n.status==="attending"?"bg-green-100 text-green-800 hover:bg-green-100":n.status==="not-attending"?"bg-red-100 text-red-800 hover:bg-red-100":"bg-yellow-100 text-yellow-800 hover:bg-yellow-100"}`,children:n.status==="attending"?"Attending":n.status==="not-attending"?"Not Attending":"Undecided"})}),e.jsx(g,{children:n.guestCount}),e.jsx(g,{children:n.phone}),e.jsx(g,{children:n.email}),e.jsx(g,{children:n.dietaryRestrictions||n.message?e.jsxs("div",{className:"max-w-xs overflow-hidden truncate",children:[n.dietaryRestrictions?e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dietary:"})," ",n.dietaryRestrictions]}):null,n.message?e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Message:"})," ",n.message]}):null]}):e.jsx("span",{className:"text-gray-400",children:"None"})}),e.jsx(g,{children:new Date(n.createdAt).toLocaleDateString()})]},n.id)):e.jsx(T,{children:e.jsx(g,{colSpan:7,className:"text-center py-10",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-[#4a5568]",children:"No RSVPs found"}),i&&e.jsx("p",{className:"text-[#718096] text-sm",children:"Try adjusting your search criteria"})]})})})})]})})]}),e.jsx(O,{value:"music",className:"space-y-6",children:e.jsx(fs,{})}),e.jsx(O,{value:"messages",className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#4a5568]",children:"Guest Message Moderation"}),e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs(w,{onClick:()=>a("/admin/guest-messages"),className:"flex items-center gap-2",children:[e.jsx("span",{children:"Go to Guest Messages Management"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"m12 5 7 7-7 7"})]})]})})]})})]})})})]})};export{ys as default};
